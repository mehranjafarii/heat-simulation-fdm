<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>شبیه‌سازی انتقال حرارت — سؤال 5-52</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <script src="https://cdn.plot.ly/plotly-3.3.0.min.js" charset="utf-8"></script>

  <link rel="stylesheet" href="./style.css" />
</head>
<body>

<nav class="navbar glass mt-3 mx-3 px-3">
  <div class="container-fluid d-flex justify-content-between gap-2 flex-wrap">
    <div class="fw-bold">شبیه‌سازی انتقال حرارت (FDM / Implicit) — سؤال 5-52</div>
    <div class="d-flex gap-2 flex-wrap">
      <span class="badge badge-soft rounded-pill px-3 py-2">تهیه‌کننده: مهران جعفری</span>
      <span class="badge badge-soft rounded-pill px-3 py-2">استاد: دکتر محمدجواد نیری</span>
    </div>
  </div>
</nav>

<div class="container-fluid mt-3 mb-4">
  <div class="row g-3">

    <!-- Controls -->
    <div class="col-12 col-lg-4">
      <div class="glass p-3">
        <div class="d-flex justify-content-between align-items-center">
          <h5 class="mb-0 fw-bold">ورودی‌ها</h5>
          <span class="badge badge-soft rounded-pill">Client-side</span>
        </div>
        <hr class="border border-light border-opacity-10"/>

        <form id="form" class="row g-3">
          <div class="col-6">
            <label class="form-label muted">Top (°C)</label>
            <input class="form-control pill text-white" id="top" type="number" step="0.1" value="100" required>
          </div>
          <div class="col-6">
            <label class="form-label muted">Bottom (°C)</label>
            <input class="form-control pill text-white" id="bottom" type="number" step="0.1" value="200" required>
          </div>

          <div class="col-6">
            <label class="form-label muted">V-node (°C)</label>
            <input class="form-control pill text-white" id="vnode" type="number" step="0.1" value="100" required>
          </div>

          <div class="col-6">
            <label class="form-label muted">σ (0.35..1.20)</label>
            <input class="form-control pill text-white" id="sigma" type="number" step="0.01" min="0.35" max="1.20" value="0.65" required>
          </div>

          <div class="col-6">
            <label class="form-label muted">رزولوشن X (nx)</label>
            <input class="form-control pill text-white" id="nx" type="number" min="80" max="320" step="10" value="140" required>
          </div>
          <div class="col-6">
            <label class="form-label muted">رزولوشن Y (ny)</label>
            <input class="form-control pill text-white" id="ny" type="number" min="60" max="260" step="10" value="95" required>
          </div>

          <div class="col-12">
            <button class="btn btn-grad w-100 py-2" type="submit">Simulate / حل و نمایش</button>
          </div>
        </form>

        <div class="mt-3 muted small-note">
          ✅ همه‌چیز روی مرورگر اجرا می‌شود (بدون نصب).<br/>
          ✅ نمودارها تعاملی‌اند (Zoom / Pan / Save).<br/>
          ⚠️ Heatmap نمایشی و مقید به گره‌هاست (برای ارائه).
        </div>

        <div class="mt-3 d-grid gap-2">
          <button class="btn btn-outline-light pill" id="btnJson">دانلود JSON</button>
          <button class="btn btn-outline-light pill" id="btnPng">دانلود PNG (Plotly)</button>
        </div>
      </div>

      <div class="glass p-3 mt-3">
        <h6 class="fw-bold mb-2">نتایج گره‌ای</h6>
        <div class="row g-2">
          <div class="col-6"><div class="pill p-3 text-center"><div class="muted">T1</div><div class="fw-bold" id="T1">—</div></div></div>
          <div class="col-6"><div class="pill p-3 text-center"><div class="muted">T2</div><div class="fw-bold" id="T2">—</div></div></div>
          <div class="col-6"><div class="pill p-3 text-center"><div class="muted">T3</div><div class="fw-bold" id="T3">—</div></div></div>
          <div class="col-6"><div class="pill p-3 text-center"><div class="muted">T4</div><div class="fw-bold" id="T4">—</div></div></div>
        </div>
        <div class="mt-2 muted small-note">تقارن: T3=T2 و T4=T1</div>
      </div>
    </div>

    <!-- Plots + Details -->
    <div class="col-12 col-lg-8">
      <div class="glass p-3">
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
          <h5 class="mb-0 fw-bold">میدان دما — Heatmap + Contour</h5>
          <span class="badge badge-soft rounded-pill">Plotly</span>
        </div>
        <hr class="border border-light border-opacity-10"/>
        <div id="plot" class="plotbox"></div>

        <div class="mt-3">
          <div class="d-flex justify-content-between align-items-center">
            <div class="fw-bold">پروفایل دما روی مقطع عمودی</div>
            <div class="muted small-note">(با اسلایدر x تغییر بده)</div>
          </div>
          <div class="mt-2 pill p-2">
            <label class="muted small-note">x = <span id="xVal"></span> cm</label>
            <input id="xSlider" type="range" min="0" max="4" step="0.02" value="2.00">
          </div>
          <div id="profile" class="plotbox2 mt-2"></div>
        </div>
      </div>

      <div class="glass p-3 mt-3">
        <ul class="nav nav-pills gap-2" role="tablist">
          <li class="nav-item"><button class="nav-link active pill" data-bs-toggle="tab" data-bs-target="#tab_details" type="button">جزئیات</button></li>
          <li class="nav-item"><button class="nav-link pill" data-bs-toggle="tab" data-bs-target="#tab_matrix" type="button">A و b</button></li>
          <li class="nav-item"><button class="nav-link pill" data-bs-toggle="tab" data-bs-target="#tab_defense" type="button">دفاع</button></li>
        </ul>

        <div class="tab-content mt-3">
          <div class="tab-pane fade show active" id="tab_details">
            <div class="mono" id="detailsText">—</div>
          </div>
          <div class="tab-pane fade" id="tab_matrix">
            <div class="mono" id="matrixText">—</div>
          </div>
          <div class="tab-pane fade" id="tab_defense">
            <div class="muted" style="line-height:1.8">
              <b>۳۰ ثانیه دفاع:</b><br/>
              «این مسئله انتقال حرارت سؤال 5-52 را با روش تفاضل محدود حل کردم.
              با اعمال شرایط مرزی دمایی، شرط عایق (∂T/∂x=0) و استفاده از تقارن، دستگاه خطی تشکیل شد
              و با حل عددی آن دماهای گره‌ای T1..T4 به دست آمد.
              سپس برای نمایش، میدان دما را به صورت Heatmap و خطوط هم‌دما (Contour) به شکل تعاملی ارائه دادم
              و همچنین پروفایل دما در یک مقطع را نشان دادم.»
              <br/><br/>
              <b>استاد:</b>  محمدجواد نیری
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="./app.js"></script>
</body>
</html>
